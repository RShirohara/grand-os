# yaml-language-server: $schema=https://schema.blue-build.org/module-list-v1.json

modules:
  # dnf packages.
  - type: "dnf"
    repos:
      copr:
        - "alternateved/keyd"
        - "lilay/topgrade"
      cleanup: false
    install:
      packages:
        - "gnome-shell-extension-appindicator"
        - "gnome-shell-extension-blur-my-shell"
        - "gnome-shell-extension-dash-to-dock"
        - "gnome-shell-extension-gsconnect"
        - "gnome-shell-extension-just-perfection"
        - "gnome-shell-extension-native-window-placement"
        - "ibus-mozc"
        - "keyd"
        - "kvantum"
        - "nautilus-python"
        - "sushi"
        - "topgrade"
      install-weak-deps: false
      skip-unavailable: false
      skip-broken: false
      allow-erasing: false
    remove:
      packages:
        - "distrobox"
        - "fuse-overlayfs"
        - "ibus-anthy-python"
        - "ibus-anthy"
        - "ibus-typing-booster"
        - "kasumi-common"
        - "kasumi-unicode"
        - "toolbox"
      auto-remove: true

  # Flatpak packages.
  - type: "default-flatpaks"
    user:
      repo-url: "https://dl.flathub.org/repo/flathub.flatpakrepo"
      repo-name: "flathub"
      repo-title: "Flathub"
      install:
        - "ca.desrt.dconf-editor"
        - "com.github.tchx84.Flatseal"
        - "io.missioncenter.MissionCenter"
        - "org.gnome.TextEditor"

  # Internal container images.
  - type: "copy"
    from: "ghcr.io/rshirohara/grand-os/internal/hackgen-fonts:42"
    src: "/"
    dest: "/"
  - type: "copy"
    from: "ghcr.io/rshirohara/grand-os/internal/trivalent-widevine:42"
    src: "/"
    dest: "/"
  - type: "copy"
    from: "ghcr.io/rshirohara/grand-os/internal/whitesur-cursor-theme:42"
    src: "/"
    dest: "/"
  - type: "copy"
    from: "ghcr.io/rshirohara/grand-os/internal/whitesur-gtk-theme:42"
    src: "/"
    dest: "/"
  - type: "copy"
    from: "ghcr.io/rshirohara/grand-os/internal/whitesur-icon-theme:42"
    src: "/"
    dest: "/"
  - type: "copy"
    from: "ghcr.io/rshirohara/grand-os/internal/whitesur-kde:42"
    src: "/"
    dest: "/"

  # GNOME Shell Extensions.
  - type: "gnome-extensions"
    install:
      - "779" # https://extensions.gnome.org/extension/779/clipboard-indicator
      - "4442" # https://extensions.gnome.org/extension/4442/gsnap
      - "4451" # https://extensions.gnome.org/extension/4451/logo-menu
      - "5489" # https://extensions.gnome.org/extension/5489/search-light
      - "7048" # https://extensions.gnome.org/extension/7048/rounded-window-corners-reborn
      # TODO: input method selector integration
      # TODO: tiling extension

  # Homebrew.
  - type: "brew"
    brew-analytics: false
    auto-update: true
    auto-upgrade: true
